spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://127.0.0.1:3306/mes?zeroDateTimeBehavior=convertToNull&useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai&autoReconnect=true
    username: root
    password: 'RCh;w/1y,i<h'
  # redis:
  #   database: 0
  #   host: 127.0.0.1
  #   port: 6379
  # cache:
  #   # 缓存类型 redis、none(不使用缓存)
  #   type: redis
  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: http://127.0.0.1:8080/oauth2/jwks
  cloud:
    # 移除 Nacos 配置
  # 邮件服务配置 (T006)
  mail:
    host: smtp.qq.com
    port: 587
    username: 243219169@qq.com
    password: bogvcxnhfqiwbhda
    # 从环境变量读取授权码
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
        debug: false
macula:
  security:
    ignore-urls:
      - /api/v1/echo/**
      - /api/v1/third-party/**  # 第三方MES批次推送接口（内网访问）
      - /api/v1/production/**   # 产线查询接口（内网访问）

mybatis-plus:
  type-handlers-package: dev.macula.boot.starter.mp.handler
  # MyBatis-Plus 逻辑删除配置 (T006)
  global-config:
    db-config:
      logic-delete-field: isDeleted  # 逻辑删除字段名
      logic-delete-value: 1          # 删除后的值
      logic-not-delete-value: 0      # 未删除的值
  #configuration:
  # 这个配置会将执行的sql打印出来，在开发或测试的时候可以用
  #  log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# 第三方MES系统配置 (T006)
mes:
  third-party:
    base-url: ${MES_THIRD_PARTY_BASE_URL:http://10.30.70.4:8088/infc/any/getPrepackageInfo}  # 第三方MES接口地址

feign:
  httpclient:
    enabled: false
    max-connections: 200 # 线程池最大连接数，默认200
    time-to-live: 900 # 线程存活时间，单位秒，默认900
    connection-timeout: 2000  # 新建连接超时时间，单位ms, 默认2000
    follow-redirects: true # 是否允许重定向，默认true
    disable-ssl-validation: false # 是否禁止SSL检查， 默认false
    okhttp:
      read-timeout: 60s # 请求超时时间，Duration配置方式
  okhttp:
    enabled: true

seata:
  enabled: false

springdoc:
  api-docs:
    enabled: true  # 默认是true，用于开关API文档
  swagger-ui:
    enabled: true # 默认是true，用于开关API UI

server:
  servlet:
    encoding:
      force: true

logging:
  level:
    root: info
    dev.macula.samples: debug
  file:
    name: /logs/mes-service1/mes-service1.log
