# 研究与澄清结论

## Decision 1: 真实包号字段属性
- **Decision**：真实包号为可空文本字段，默认不写入时保持为空，不影响其他字段返回
- **Rationale**：报工流程可能不提供该值，保持兼容性并避免破坏现有数据
- **Alternatives considered**：
  - 强制必填（会导致历史数据与现有报工无法提交）
  - 使用数值类型（真实包号可能含字母与分隔符）

## Decision 2: 覆盖规则
- **Decision**：报工提交包含真实包号时，以最新提交值覆盖；未传值则不覆盖
- **Rationale**：与需求“入库该状态”一致，避免空值覆盖已有有效数据
- **Alternatives considered**：
  - 始终覆盖（可能被空值覆盖）
  - 禁止覆盖（无法修正录入错误）

## Decision 3: 查询返回范围
- **Decision**：在批次层级、包装层级、板件详情查询的板件实体中返回真实包号字段
- **Rationale**：满足追溯场景，且不改变查询结构，仅扩展字段
- **Alternatives considered**：
  - 仅在详情接口返回（无法满足层级追溯）
  - 返回在外层结构（破坏现有层级契约）
