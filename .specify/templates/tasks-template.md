---

description: "功能实现任务清单模板"
---

# 任务清单：[FEATURE NAME]

**输入**：来自 `/specs/[###-feature-name]/` 的设计文档
**前置条件**：plan.md（必需）、spec.md（用户故事必需）、research.md、data-model.md、contracts/

**测试**：以下示例包含测试任务。仅在功能规格明确要求测试时才加入。

**组织方式**：按用户故事分组，确保每个故事可独立实现与测试。

## 格式：`[ID] [P?] [Story] 描述`

- **[P]**：可并行执行（不同文件、无依赖）
- **[Story]**：任务所属用户故事（例如 US1、US2、US3）
- 描述中必须包含准确文件路径

## 路径约定

- **Java 多模块**：`{module}/src/main/java/`、`{module}/src/test/java/`
- **测试中间产物**：`test/`（宪章要求，必须被 `.gitignore`）
- 下方示例假设为 Java 多模块结构，需按 plan.md 调整

<!-- 
  ==========================================================================
  重要：以下任务仅为示例。

  /speckit.tasks 命令必须用真实任务替换示例，依据：
  - spec.md 的用户故事与优先级
  - plan.md 的需求与约束
  - data-model.md 的实体
  - contracts/ 的接口

  生成的 tasks.md 不得保留示例任务。
  ==========================================================================
-->

## 阶段 1：初始化（共享基础）

**目的**：项目初始化与基础结构

- [ ] T001 按实施计划创建目录结构
- [ ] T002 初始化 [语言] 项目与 [框架] 依赖
- [ ] T003 [P] 配置代码格式化与静态检查

---

## 阶段 2：基础能力（阻塞前置）

**目的**：必须先完成的基础设施

**⚠️ 严重阻塞**：本阶段未完成不得开始任何用户故事

示例任务（按项目调整）：

- [ ] T004 建立数据库表结构与迁移机制
- [ ] T005 [P] 实现认证/鉴权框架
- [ ] T006 [P] 搭建 API 路由与中间件
- [ ] T007 建立所有故事依赖的基础实体
- [ ] T008 配置错误处理与日志
- [ ] T009 配置环境参数管理

**检查点**：基础能力就绪，用户故事可并行开始

---

## 阶段 3：用户故事 1 - [标题]（优先级：P1）🎯 MVP

**目标**：[该故事交付的价值]

**独立测试**：[如何验证该故事独立可用]

### 用户故事 1 的测试（可选，仅在需求要求时）⚠️

> **注意**：先写测试并确保失败后再实现

- [ ] T010 [P] [US1] 契约测试：`{module}/src/test/java/.../ContractTest.java`
- [ ] T011 [P] [US1] 集成测试：`{module}/src/test/java/.../IntegrationTest.java`

### 用户故事 1 的实现

- [ ] T012 [P] [US1] 在 `{module}/src/main/java/...` 创建 [Entity1]
- [ ] T013 [P] [US1] 在 `{module}/src/main/java/...` 创建 [Entity2]
- [ ] T014 [US1] 实现 [Service]（依赖 T012、T013）
- [ ] T015 [US1] 实现 [endpoint/feature] 接口
- [ ] T016 [US1] 增加校验与错误处理
- [ ] T017 [US1] 增加关键日志

**检查点**：用户故事 1 已可独立运行与验证

---

## 阶段 4：用户故事 2 - [标题]（优先级：P2）

**目标**：[该故事交付的价值]

**独立测试**：[如何验证该故事独立可用]

### 用户故事 2 的测试（可选，仅在需求要求时）⚠️

- [ ] T018 [P] [US2] 契约测试：`{module}/src/test/java/.../ContractTest.java`
- [ ] T019 [P] [US2] 集成测试：`{module}/src/test/java/.../IntegrationTest.java`

### 用户故事 2 的实现

- [ ] T020 [P] [US2] 创建 [Entity] 实体
- [ ] T021 [US2] 实现 [Service]
- [ ] T022 [US2] 实现 [endpoint/feature] 接口
- [ ] T023 [US2] 与用户故事 1 的组件集成（如需要）

**检查点**：用户故事 1 与 2 均可独立运行

---

## 阶段 5：用户故事 3 - [标题]（优先级：P3）

**目标**：[该故事交付的价值]

**独立测试**：[如何验证该故事独立可用]

### 用户故事 3 的测试（可选，仅在需求要求时）⚠️

- [ ] T024 [P] [US3] 契约测试：`{module}/src/test/java/.../ContractTest.java`
- [ ] T025 [P] [US3] 集成测试：`{module}/src/test/java/.../IntegrationTest.java`

### 用户故事 3 的实现

- [ ] T026 [P] [US3] 创建 [Entity] 实体
- [ ] T027 [US3] 实现 [Service]
- [ ] T028 [US3] 实现 [endpoint/feature] 接口

**检查点**：所有用户故事均可独立运行

---

[按需增加更多用户故事阶段，保持相同模式]

---

## 阶段 N：打磨与跨故事优化

**目的**：影响多个用户故事的改进

- [ ] TXXX [P] 更新文档（docs/ 或 README）
- [ ] TXXX 代码清理与重构
- [ ] TXXX 跨故事性能优化
- [ ] TXXX [P] 补充单元测试（如需求要求）
- [ ] TXXX 安全加固
- [ ] TXXX 验证 quickstart.md（如存在）

---

## 依赖关系与执行顺序

### 阶段依赖

- **初始化（阶段 1）**：无依赖，可立即开始
- **基础能力（阶段 2）**：依赖阶段 1 完成，阻塞所有用户故事
- **用户故事（阶段 3+）**：依赖阶段 2 完成
  - 可并行或按优先级顺序（P1 → P2 → P3）
- **打磨（最终阶段）**：依赖所有需要的用户故事完成

### 用户故事依赖

- **用户故事 1（P1）**：阶段 2 完成后即可开始
- **用户故事 2（P2）**：阶段 2 完成后即可开始
- **用户故事 3（P3）**：阶段 2 完成后即可开始

### 每个用户故事内部顺序

- 测试（如包含）必须先写并失败
- 实体/模型先于服务
- 服务先于接口
- 核心实现先于集成
- 完成后独立验证再进入下个优先级

### 并行机会

- 标记 [P] 的初始化任务可并行
- 标记 [P] 的基础能力任务可并行
- 基础能力完成后，用户故事可并行
- 用户故事内可并行的测试与实体创建可并行
- 不同用户故事可由不同成员并行推进

---

## 并行示例：用户故事 1

```bash
# 并行启动用户故事 1 的测试（如需求要求）：
任务："契约测试：{module}/src/test/java/.../ContractTest.java"
任务："集成测试：{module}/src/test/java/.../IntegrationTest.java"

# 并行启动用户故事 1 的实体创建：
任务："创建 [Entity1] 实体"
任务："创建 [Entity2] 实体"
```

---

## 实施策略

### MVP 优先（仅用户故事 1）

1. 完成阶段 1：初始化
2. 完成阶段 2：基础能力（关键阻塞）
3. 完成阶段 3：用户故事 1
4. **停止并验证**：独立测试用户故事 1
5. 如满足条件，部署/演示

### 增量交付

1. 完成初始化 + 基础能力 → 基础就绪
2. 交付用户故事 1 → 独立测试 → 部署/演示
3. 交付用户故事 2 → 独立测试 → 部署/演示
4. 交付用户故事 3 → 独立测试 → 部署/演示
5. 每个故事独立增加价值，不破坏已有能力

### 并行团队策略

在多人并行时：

1. 团队共同完成初始化与基础能力
2. 基础能力完成后：
   - 成员 A：用户故事 1
   - 成员 B：用户故事 2
   - 成员 C：用户故事 3
3. 各故事独立完成并最终集成

---

## 说明

- [P] 任务：不同文件、无依赖
- [Story] 标签：用于追踪任务归属
- 用户故事必须可独立完成与验证
- 如包含测试，必须先失败再实现
- 完成每个关键检查点后及时验证
- 避免：含糊任务、同文件冲突、跨故事强依赖
